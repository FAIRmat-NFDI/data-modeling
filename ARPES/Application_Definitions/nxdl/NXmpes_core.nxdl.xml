<?xml version="1.0" ?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xslt"?>
<definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/2001/XMLSchema-instance" category="application" extends="NXentry" type="group" doc="This is the most general application definition for multidimensional ARPES.">
	<field name="name" type="NX_CHAR"/>
	<symbols doc="The symbols used in the schema to specify e.g. dimensions of arrays">
		<sym name="doc" doc="The symbols used in the schema to specify e.g. dimensions of arrays"/>
		<sym name="nfa" doc="Number of fast axes (acquired simutaneously) e.g. emission angle, kinetic energy"/>
		<sym name="nsa" doc="Number of slow axes (acquired scanning a physical quantity) e.g. lens voltage, photon energy or temperature"/>
		<sym name="nx" doc="Number of points in the first angular direction"/>
		<sym name="ne" doc="Number of points in the energy dispersion direction"/>
	</symbols>
	<field name="category" type="NX_CHAR"/>
	<group type="NXentry">
		<attribute name="entry" doc="NeXus convention is to use &quot;entry1&quot;, &quot;entry2&quot;, for analysis software to locate each entry."/>
		<field name="title" type="NX_CHAR" doc="Title describing the entry."/>
		<field name="start_time" type="NX_DATE_TIME" doc="ISO8601 formatted date time of the start of the measurement."/>
		<field name="definition" type="NX_CHAR" doc="Official NeXus NXDL schema to which this file conforms.">
			<attribute name="version" type="NX_CHAR"/>
			<enumeration>
				<item value="NXmpes"/>
				<item value="NXmpes_core"/>
			</enumeration>
		</field>
		<group type="NXinstrument">
			<group type="NXsource">
				<field name="type" type="NX_CHAR" doc="Type of source. Any of these values: - Synchrotron X-ray Source - Rotating Anode X-ray - Fixed Tube X-ray - UV Laser - Free-Electron Laser - Optical Laser - UV Plasma Source - Metal Jet X-ray">
					<enumeration>
						<item value="Synchrotron X-ray Source"/>
						<item value="Rotating Anode X-ray"/>
						<item value="Fixed Tube X-ray"/>
						<item value="UV Laser"/>
						<item value="Free-Electron Laser"/>
						<item value="Optical Laser"/>
						<item value="UV Plasma Source"/>
						<item value="Metal Jet X-ray"/>
					</enumeration>
				</field>
				<field name="name" type="NX_CHAR" doc="Free text name of the source."/>
				<field name="probe" type="NX_CHAR" doc="Type of probe. In photoemission it's always photons, any of these values: - x-ray - ultraviolet - visible light">
					<enumeration>
						<item value="x-ray"/>
						<item value="ultraviolet"/>
						<item value="visible light"/>
					</enumeration>
				</field>
			</group>
			<group type="NXbeam" doc="Properties of the beam at the sample.">
				<field name="distance" type="NX_NUMBER" doc="Distance of the point of evaluation of the beam from the sample." units="NX_LENGTH"/>
				<field name="incident_energy" type="NX_NUMBER" doc="Incident photon energy." units="NX_ENERGY"/>
				<field name="incident_energy_spread" type="NX_NUMBER" recommended="true" doc="FWHM energy linewidth of the incident photons." units="NX_ENERGY"/>
				<field name="incident_polarization" type="NX_NUMBER" recommended="true" doc="Incident polarization specified as a Stokes vector." units="NX_ANY">
					<dimensions rank="1">
						<dim index="1" value="4"/>
					</dimensions>
				</field>
			</group>
			<group type="NXelectronanalyser">
				<field name="description" type="NX_CHAR" doc="Free text description of the type of detector."/>
				<field name="energy_resolution" type="NX_NUMBER" doc="Energy resolution of the analyser with the current setting." units="NX_ENERGY"/>
				<field name="momentum_resolution" type="NX_NUMBER" doc="Momentum resolution of the analyser with the current setting." units="NX_WAVENUMBER"/>
				<field name="fast_axes" type="NX_CHAR" optional="true" doc="List of the axes that are acquired symultaneously by the detector.">
					<dimensions rank="1">
						<dim index="1" value="nfa"/>
					</dimensions>
				</field>
				<field name="slow_axes" type="NX_CHAR" optional="true" doc="List of the axes that are acquired by scanning a physical parameter, listed in order of decreasing speed.">
					<dimensions rank="1">
						<dim index="1" value="nsa"/>
					</dimensions>
				</field>
				<group type="NXcollectioncolumn">
					<field name="scheme" type="NX_CHAR" doc="Scheme of the electron collection column.">
						<enumeration>
							<item value="Standard"/>
							<item value="Deflector"/>
							<item value="PEEM"/>
							<item value="Momentum Microscope"/>
						</enumeration>
					</field>
					<field name="mode" type="NX_CHAR" recommended="true" doc="Labelling of the lens setting in use."/>
					<field name="projection" type="NX_CHAR" recommended="true" doc="The space projected in the angularly dispersive directions, i.e. real or reciprocal.">
						<enumeration>
							<item value="real"/>
							<item value="reciprocal"/>
						</enumeration>
					</field>
				</group>
				<group type="NXenergydispersion">
					<field name="scheme" type="NX_CHAR" doc="Energy dispersion scheme employed.">
						<enumeration>
							<item value="tof"/>
							<item value="hemispherical"/>
							<item value="cylindrical mirror"/>
							<item value="display mirror"/>
							<item value="retarding grid"/>
						</enumeration>
					</field>
					<field name="pass_energy" type="NX_NUMBER" doc="energy of the electrons on the mean path of the analyser." units="NX_ENERGY"/>
					<field name="energy_scan_mode" type="NX_CHAR" doc="Way of scanning the energy axis (fixed or sweep).">
						<enumeration>
							<item value="fixed"/>
							<item value="sweep"/>
						</enumeration>
					</field>
					<group type="NXaperture" recommended="true" doc="Aperture generating the momentum and/or energy filtering.">
						<field name="description" type="NX_CHAR" doc="Type of aperture inserted in the beam. One of the following: - slit - pinhole - iris">
							<enumeration>
								<item value="slit"/>
								<item value="pinhole"/>
								<item value="iris"/>
							</enumeration>
						</field>
						<field name="shape" type="NX_CHAR" doc="Description of the shape of the active part of the aperture, curved or straight for horizontal slits, square or round for pinhole etc.">
							<enumeration>
								<item value="curved"/>
								<item value="straight"/>
								<item value="circle"/>
								<item value="square"/>
								<item value="hexagon"/>
								<item value="octagon"/>
								<item value="bladed"/>
							</enumeration>
						</field>
						<field name="size" type="NX_NUMBER" doc="The relevant dimension for the aperture (slit width, pinhole diameter etc)." units="NX_LENGTH"/>
					</group>
				</group>
				<group type="NXdetector">
					<field name="amplifier_type" type="NX_CHAR" doc="Type of electron amplifier.">
						<enumeration>
							<item value="MCP"/>
							<item value="channeltron"/>
						</enumeration>
					</field>
					<field name="detector_type" type="NX_CHAR" doc="Description of the detector type.">
						<enumeration>
							<item value="DLD"/>
							<item value="Phosphor+CCD"/>
							<item value="Phosphor+CMOS"/>
							<item value="ECMOS"/>
						</enumeration>
					</field>
					<field name="sensor_pixels" type="NX_INT" recommended="true" doc="Number of raw active element in each dimension. Important for swept scans.">
						<dimensions rank="1">
							<dim index="1" value="2"/>
						</dimensions>
					</field>
					<group type="NXdata" recommended="true">
						<attribute name="signal"/>
						<field name="raw" type="NX_NUMBER" doc="Raw data before calibration."/>
					</group>
				</group>
			</group>
		</group>
		<group type="NXprocess">
			<field name="calculated_kx" type="NX_FLOAT" recommended="true" doc="Calibrated kx momentum axis." units="NX_WAVENUMBER">
				<dimensions rank="1">
					<dim index="1" value="nx"/>
				</dimensions>
			</field>
			<field name="calculated_energy" type="NX_FLOAT" recommended="true" doc="Calibrated energy axis." units="NX_ENERGY">
				<dimensions rank="1">
					<dim index="1" value="ne"/>
				</dimensions>
			</field>
			<group name="distortion_correction" type="NXdistortion">
				<field name="applied" type="NX_BOOLEAN" doc="Has a distortion correction been applied?"/>
			</group>
			<group name="image_registration" type="NXregistration">
				<field name="applied" type="NX_BOOLEAN" doc="Has an image registration been applied?"/>
			</group>
			<group name="energy_calibration" type="NXcalibration">
				<field name="applied" type="NX_BOOLEAN" doc="Has an energy calibration been applied?"/>
			</group>
			<group name="momentum_calibration" type="NXcalibration" optional="true">
				<field name="applied" type="NX_BOOLEAN" doc="Has a momentum calibration been applied?"/>
			</group>
		</group>
		<group type="NXsample">
			<field name="name" type="NX_CHAR" doc="Simple and descriptive name of the sample."/>
			<field name="chemical_formula" type="NX_CHAR" doc="Chemical formula of the sample."/>
			<field name="sample_history" type="NX_CHAR" optional="true" doc="Ideally, a reference to the location or a unique identifier or other metadata file. In the case that is not available, free-text description."/>
			<field name="preparation_date" type="NX_DATE_TIME" recommended="true" doc="ISO 8601 date of preparation of the sample for the ARPES experiment (i.e. cleaving, last annealing)." units="NX_TIME"/>
			<field name="description" type="NX_CHAR" doc="Free-text surface preparation technique for the ARPES experiment, i.e. UHV cleaving, in-situ growth, sputtering/annealing etc."/>
			<field name="temperature" type="NX_NUMBER" doc="Temperature of the sample" units="NX_TEMPERATURE"/>
			<field name="situation" type="NX_CHAR"/>
			<field name="pressure" type="NX_NUMBER" doc="Residual gas pressure at the sample" units="NX_PRESSURE"/>
		</group>
		<group type="NXdata">
			<attribute name="signal"/>
			<attribute name="axes"/>
			<attribute name="energy_indices"/>
			<attribute name="kpar_indices"/>
			<field name="data" type="NX_NUMBER" doc="Processed plottable data."/>
			<field name="energy" type="NX_NUMBER" doc="Data containing the energy axis"/>
			<field name="kpar" type="NX_NUMBER" doc="Data containing the k parallel axis"/>
		</group>
	</group>
</definition>
