category: base
symbols:
  doc: The symbols used in the schema to specify e.g. dimensions of arrays
  ncoeff: Number of coefficients of the calibration function
  nfeat: Number of features used to fit the calibration function
  ncal: Number of points of the calibrated and uncalibrated axes
doc: "Draft subclass of NXprocess to describe post-processing calibrations."
(NXcalibration):
  applied(NX_BOOL):
    doc: "Has the calibration been applied?"
  coefficients(NX_FLOAT):
    doc: "For non-linear energy calibrations, e.g. in a TOF, a polynomial function
      is fit to a set of features (peaks) at well defined energy positions to determine
      E(TOF). Here we can store the array of fit coefficients."
    unit: NX_ANY
    dimensions:
      dim: [[1,ncoeff]]
      rank: 1
  fit_function(NX_CHAR):
    doc: "For non-linear energy calibrations. Here we can store the formula of the
      fit function."
  scaling(NX_FLOAT):
    doc: "For linear calibration. Scaling parameter."
    unit: NX_ANY
  offset(NX_FLOAT):
    doc: "For linear calibration. Offset parameter."
    unit: NX_ANY
  calibrated_axis(NX_FLOAT):
    doc: "A vector representing the axis after calibration, matching the data length"
    unit: NX_ANY
    dimensions:
      dim: [[1,ncal]]
      rank: 1
  conversion_table(NX_FLOAT):
    doc: "2 vectors, representing how the raw points get mapped on the calibrated
      axis."
    unit: NX_ANY
    dimensions:
      dim: [[1,ncal],[1,ncal]]
      rank: 2
  COLLECTION(NXcollection):
    doc: "Class to describe freely the procedures employed."
