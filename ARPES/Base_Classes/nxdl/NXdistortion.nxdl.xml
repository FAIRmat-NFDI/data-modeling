<?xml version="1.0" ?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xslt"?>
<definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/2001/XMLSchema-instance" category="base" extends="NXobject" type="group" doc="Draft subclass of NXprocess to describe post-processing distortion correction.">
	<field name="name" type="NX_CHAR"/>
	<field name="category" type="NX_CHAR"/>
	<symbols doc="The symbols used in the schema to specify e.g. dimensions of arrays">
		<sym name="doc" doc="The symbols used in the schema to specify e.g. dimensions of arrays"/>
		<sym name="nsym" doc="Number of symmetry points used for distortion correction"/>
		<sym name="ndx" doc="Number of points of the matrix distortion field (x direction)"/>
		<sym name="ndy" doc="Number of points of the matrix distortion field (y direction)"/>
	</symbols>
	<group type="NXobject">
		<group name="applied" type="NX_BOOL" doc="Has the distortion correction been applied?"/>
		<field name="symmetry" type="NX_INT" units="NX_UNITLESS" doc="Number of elementary symmetry operations."/>
		<field name="symmetry_angle" type="NX_FLOAT" units="NX_ANGLE" doc="Degrees of rotation for a symmetry operation."/>
		<field name="original_centre" type="NX_FLOAT" units="NX_UNITLESS" doc="Coordinates of the symmetry centre point.">
			<dimensions rank="1">
				<dim index="1" value="2"/>
			</dimensions>
		</field>
		<field name="original_points" type="NX_FLOAT" units="NX_UNITLESS" doc="Coordinates of the relevant symmetry points.">
			<dimensions rank="1">
				<dim index="2" value="nsym"/>
			</dimensions>
		</field>
		<field name="field" type="NX_FLOAT" units="NX_UNITLESS" doc="2D matrix mapping the original distorted field in the undistorted one.">
			<dimensions rank="1">
				<dim index="ndx" value="ndy"/>
			</dimensions>
		</field>
	</group>
</definition>
