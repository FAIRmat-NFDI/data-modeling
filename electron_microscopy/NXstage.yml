#kuehbacm at hu-berlin.de, 11/2021
#the application cases in mind are that this class can be used to describe how the specimen
#is mounted and placed in the electron beam and how external stimuli can be applied
#micromanipulators are used primarily for sample preparation in an SEM/FIB instruments
#this application case is excluded here
#the draft was inspired by commercial products and (transmission) electron microscopy literature
#https://www.nanotechnik.com/e5as.html
#https://www.protochips.com/products/fusion/fusion-select-components/
#L. Reimer's book on transmission electron microscopy, 1997, page 103, table 4.2
#D. B. Williams and C. B. Carter's book on TEM, 1996, page 124
name: NXstage
category: contributed
doc: Draft class for stages, i.e. advanced specimen holders which often represent own small laboratories with more capability than just to hold the sample/specimen in place.
(NXstage):
  doc: Candidate class for a component/set of components, assumed as one logical unit with a purpose for the experiment, of an instrument which can hold the sample/specimen and apply stimuli on it. Having an own candidate class is justified as contemporary specimen/sample stages are, especially in cutting-edge experiments, multi-purpose/-functional tools for not only holding the specimen in place, but also aligning and rotating, or perform in-situ heating or cooling, in-situ mechanical testing, offering reaction cells, or controlling the stage temperature, or even offering reaction cells.
  #in this first draft we focus on the functionalities holding the sample, positioning and rotating it and controlling temperature, later in-situ testing could be added.
  name:
    doc: Colloquial or short name for the component.
#  stage_location:
#    doc: location relative to the objective lens
#    enumeration: [top, bottom, inside]
  stage_design:
    doc: Principal design of the component which carries also the actual holder. #differences for e.g. EM and APM exist, need to discuss if we go for one class covering all of these cases or for one class from which to inherit and instantiate areaB method-specific stage childs? Given that modern stages themselves represent a hierarchy of components should this hierarchy be considered. E.g. in atom probe we have carousels which carry pucks which themselves carry clips which hold the specimen, TEMs have stages which carry the holder which carries the grid which carries the particle/object or foil that is to be measured.
    enumeration: [side-entry, top-entry]
  stage_manufacturer:
    doc: Name of the manufacturer who built the stage.
  stage_model:
    doc: Commercial name of the stage given by the manufacturer.
  stage_identifier:
    doc: Persistent identifier like hash value or serial number of the manufacturer which specifies the stage.
  stage_description:
    doc: Ideally a link to a (globally persistent) unique identifier document or link where further details to the component can be found. If not available use free text to give further details to the stage.
  stage_ref_csys(NXtransformations):
    doc: The reference coordinate system in which all affine transformations are defined at the level of the stage. If the holder enables additional degrees of freedom, use holder_ref_csys
  holder_design:
    doc: Type of holder which carries the specimen.
    enumeration: [single-tilt, quick-change, multiple-specimen, bulk specimen, double-tilt, tilt-rotate, heating chip, atmosphere chip, electrical biasing chip, liquid cell chip]
  #the nested names in my opinion suggest to make a stage a hierarchy of stages or a hierarchy of holders...?
  holder_manufacturer:
    doc: Name of the manufacturer who built the holder.
  holder_model:
    doc:C ommercial name of the holder given by the manufacturer.
  holder_identifier:
    doc: Persistent identifier like hash value or serial number of the manufacturer which specifies the holder.
  holder_description:
    doc: Ideally a link to a (globally persistent) unique identifier document or link where further details to the component can be found. If not available use free text to give further details to the holder.
  holder_cup_material:
    doc: In the case of a side-entry stage design, the material of the cup which holds the specimen.
  holder_ref_csys(NXtransformations):
    doc: The reference coordinate system in which all affine transformations are defined at the level of the holder.
#exemplified here how to describe and deal with complicated positioning tools like an eucentric five axis table stage in an SEM
#https://www.nanotechnik.com/e5as.html
  holder_ref_csys(NXtransformations):
  holder_shipswing_tilt(NXpositioner):
  holder_normal_rotate(NXpositioner):
  holder_normal_height(NXpositioner):
  holder_inplane_translate1(NXpositioner):
  holder_inplane_translate2(NXpositioner):
  #need to add temperature control units and components to apply external stimuli on the specimen
  #eventually also useful to have gaseous atmosphere
