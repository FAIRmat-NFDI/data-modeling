#kuehbacm at hu-berlin.de, 12/2021
#draft for a class which can describe all those components of an (electron) microscope which equips it with focused ion beam milling capabilities. FIB is a material preparation technique whereby the sample is milled with a focused ion beam to remove material. The technique enables site-specific preparation. One of the key application cases is in a scanning electron microscope / focused-ion beam instrument (SEM/FIB). The fact that a second gun and relevant control and focusing devices are needed warrants an own class.
#for more details about the relevant physics the following studies can be a start:
#https://link.springer.com/content/pdf/10.1557/s43578-020-00045-w.pdf
#https://www.sciencedirect.com/science/article/pii/S0168583X10001862
name: NXfib_draft
category: contributed
doc: Draft class for focused-ion beam capabilities of an instrument. The class is designed to be used as an additional component to e.g. an electron microscope to enable the collecting of data and metadata for (S)EM/FIB instruments.
symbols:
  doc: The symbols used in the schema to specify e.g. d
(NXfib_draft): #NXobject
  exists: required
  doc: Class for describing focused-ion beam capabilities of an instrument.
  manufacturer_name:
  manufacturer_model:
  ion_gun(NXsource):
      exists: required
      type:
        exists: required
        doc: The source creating the ion beam.
        enumeration: [ion source]
      flux(NX_FLOAT):
        unit: NX_FLUX
      current(NX_FLOAT):
        unit: NX_CURRENT
      voltage(NX_FLOAT):
        unit: NX_VOLTAGE
      ion_source(NX_CHAR):
        exists: required
        doc: Which element is used and ionized to sputter the material ?
        enumeration: [gallium, helium, neon, krypton, xenon]
      energy(NX_FLOAT):
        unit: NX_ENERGY
      description:
        doc: Ideally a reference to (another) file (ideally formatted using also an application definition) via a link, name, or a (globally persistent) unique identifier to give further details about the ion gun.
      (NXtransformation):
        doc: A right-handed Cartesian coordinate system is used whose positive z-axis points in the direction of the ion beam, i.e. towards the sample. For modelling ion milling it is relevant to document the illumination vector. NXtransformations offers a place to store how the ion gun coordinate system has to be rotated to align its positive z-axis with the positive z-axis of e.g. the electron beam. Check NXem_draft and NXtransformations for further details.
    #once the ion beam is created we can probe the beam and document these probes with NXbeam
    #but we need electro-magnetic lenses to shape the ion beam and a scan box to sputter material in a controlled manner
    (NXem_lens):
      exists: [min, 1, max, infty]
    (NXaperture):
      exists: [min, 0, max, infty]
    #these components are controlled, usually with a instrument control software that is often part of e.g. the microscope software.
    scan_align(NXprocess):
      exists: required
      doc: No further detailed hardware/software which illuminates the sample
    milling_plan(NXprocess):
      exists: optional
      doc: Description of the program and sequence of sample positions sputtered.
      #in here we can store time-dependent quantities that give further details how the